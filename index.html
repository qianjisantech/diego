<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <!-- 响应式设计 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
    <!-- 浏览器兼容性 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="renderer" content="webkit" />
    <!-- PWA 支持 -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <!-- SEO -->
    <meta name="description" content="Diego - 简单好用的需求管控系统，高效的任务管理，实时团队协作" />
    <meta name="keywords" content="需求管理,项目管理,任务管理,团队协作,Diego" />
    <title>Diego - 需求管控系统</title>
    <!-- Polyfill for axios - MUST be in head before any module scripts -->
    <script>
      (function() {
        // Ensure globalThis exists
        if (typeof globalThis === 'undefined') {
          if (typeof self !== 'undefined') { self.globalThis = self; }
          else if (typeof window !== 'undefined') { window.globalThis = window; }
          else if (typeof global !== 'undefined') { global.globalThis = global; }
        }

        // Ensure global exists
        if (typeof global === 'undefined') {
          window.global = window;
        }

        // Define Request/Response/Headers classes
        var RequestClass = class Request { constructor() {} };
        var ResponseClass = class Response { constructor() {} };
        var HeadersClass = class Headers { constructor() {} };

        // Define on all possible global objects
        if (typeof globalThis !== 'undefined') {
          globalThis.Request = globalThis.Request || RequestClass;
          globalThis.Response = globalThis.Response || ResponseClass;
          globalThis.Headers = globalThis.Headers || HeadersClass;
        }

        if (typeof window !== 'undefined') {
          window.Request = window.Request || RequestClass;
          window.Response = window.Response || ResponseClass;
          window.Headers = window.Headers || HeadersClass;
        }

        if (typeof self !== 'undefined') {
          self.Request = self.Request || RequestClass;
          self.Response = self.Response || ResponseClass;
          self.Headers = self.Headers || HeadersClass;
        }

        if (typeof global !== 'undefined') {
          global.Request = global.Request || RequestClass;
          global.Response = global.Response || ResponseClass;
          global.Headers = global.Headers || HeadersClass;
        }
      })();
    </script>
  </head>
  <body>
    <!-- 初始化加载动画 -->
    <div id="loading-overlay">
      <div class="loading-container">
        <div class="loading-spinner"></div>
        <div class="loading-text">正在加载应用...</div>
        <div class="loading-subtext">Cooperise - 需求管控系统</div>
      </div>
    </div>
    
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
    
    <!-- 加载动画样式 -->
    <style>
      /* 基础重置 */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      #loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: white;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        transition: opacity 0.5s ease, transform 0.3s ease;
        overflow: hidden;
      }
      
      /* 添加背景脉冲效果 */
      #loading-overlay::before {
        content: '';
        position: absolute;
        width: 150%;
        height: 150%;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
        animation: pulse 2s ease-in-out infinite;
      }
      
      .loading-container {
        position: relative;
        z-index: 2;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      
      .loading-spinner {
        width: 80px;
        height: 80px;
        border: 4px solid rgba(0, 164, 255, 0.2);
        border-top: 4px solid #00A4FF;
        border-radius: 50%;
        animation: spin 1s linear infinite, pulse 1.5s ease-in-out infinite alternate;
        margin-bottom: 24px;
        box-shadow: 0 0 20px rgba(0, 164, 255, 0.3);
      }
      
      .loading-text {
        color: #00A4FF;
        font-size: 20px;
        font-weight: 600;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        text-shadow: 0 2px 10px rgba(0, 164, 255, 0.2);
        animation: fadeIn 1s ease-in-out;
      }
      
      /* 添加版本信息或额外文本 */
      .loading-subtext {
        color: rgba(0, 164, 255, 0.8);
        font-size: 14px;
        font-weight: 400;
        margin-top: 8px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        animation: fadeIn 1.5s ease-in-out;
      }
      
      /* 动画定义 */
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      @keyframes pulse {
        0% { transform: scale(1); opacity: 1; }
        100% { transform: scale(1.05); opacity: 0.8; }
      }
      
      @keyframes fadeIn {
        0% { opacity: 0; transform: translateY(10px); }
        100% { opacity: 1; transform: translateY(0); }
      }
      
      /* 加载完成后淡出效果 */
      #loading-overlay.fade-out {
        opacity: 0;
        pointer-events: none;
        transform: scale(0.95);
      }
      
      /* 响应式设计 */
      @media (max-width: 768px) {
        .loading-spinner {
          width: 60px;
          height: 60px;
        }
        
        .loading-text {
          font-size: 16px;
        }
        
        .loading-subtext {
          font-size: 12px;
        }
      }
      
      /* 深色模式适配 */
      @media (prefers-color-scheme: dark) {
        #loading-overlay {
          background: #f8f9fa;
        }

        .loading-text {
          color: #00A4FF;
        }

        .loading-subtext {
          color: rgba(0, 164, 255, 0.8);
        }

        .loading-spinner {
          border: 4px solid rgba(0, 164, 255, 0.2);
          border-top: 4px solid #00A4FF;
          box-shadow: 0 0 20px rgba(0, 164, 255, 0.3);
        }
      }
    </style>
  </body>
</html>
